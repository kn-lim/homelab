apiVersion: builtin
kind: HelmChartInflationGenerator

metadata:
  name: cilium

name: cilium
# renovate: datasource=helm depName=cilium repository=https://helm.cilium.io/
version: 1.19.0
releaseName: cilium
namespace: kube-system
repo: https://helm.cilium.io/
includeCRDs: true
valuesInline:
  # https://docs.siderolabs.com/kubernetes-guides/cni/deploying-cilium
  kubeProxyReplacement: true

  securityContext:
    capabilities:
      ciliumAgent:
        - CHOWN
        - KILL
        - NET_ADMIN
        - NET_RAW
        - IPC_LOCK
        - SYS_ADMIN
        - SYS_RESOURCE
        - DAC_OVERRIDE
        - FOWNER
        - SETGID
        - SETUID
      cleanCiliumState:
        - NET_ADMIN
        - SYS_ADMIN
        - SYS_RESOURCE

  cgroup:
    autoMount:
      enabled: false
    hostRoot: /sys/fs/cgroup

  k8sServiceHost: localhost
  k8sServicePort: 7445
